<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600646 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="495"/>

<div>
<span><div><span style="font-size: 12pt;"><img src="00-笔记_files/奥特曼.gif" type="image/gif" data-filename="奥特曼.gif" style="font-size: 12pt;"/></span></div><div><br clear="none"/></div><div><span style="font-size: 12pt;">奥特曼打小怪兽，在需要的时候触发大招行为，那么“需要的时候”其实就是指事件。</span></div><div><br clear="none"/></div><div><span style="font-size: 12pt;">当</span><span style="font-size: 12pt;">奥特曼即将被打趴下</span><span style="font-size: 12pt;">（</span><span style="font-size: 12pt;">事件<span style="font-size: 12pt;">被触发</span></span><span style="font-size: 12pt;">）的时候就会发大招（执行函数）。</span></div><div><br clear="none"/></div><div><span style="font-size: 12pt;">在一个程序中，我们决定做了用户做了事情之后该做什么</span></div><div><br clear="none"/></div><div><span style="font-size: 12pt;">事件的原理和hover类似。可以做到:hover做不到的事，:hover只能操作当前的元素，但是事件绑定之后可以选择任何元素。</span></div><div><br clear="none"/></div><div><span style="font-size: 12pt;">事件触发三要素：通过谁触发？ 通过什么触发？触发后要做什么？</span></div><div><br clear="none"/></div><div><span style="font-size: 12pt;">事件的写法：</span></div><div><br clear="none"/></div><div><span style="font-size: 12pt; color: rgb(255, 122, 116);">w3c标准</span><span style="font-size: 12pt;">：事件写在行内，但是因为结构和行为要分离，所以我们一般情况下用JavaScript的方法来绑定事件，只有再极少数情况下，才将事件写在行内，事件的绑定方法：</span></div><div><br clear="none"/></div><div><span style="font-size: 12pt;">浏</span><span style="font-size: 12pt;">览器中的节点(对象).on+</span><span style="font-size: 12pt; color: rgb(227, 0, 0);">事件句柄</span> <span style="font-size: 12pt;">= function( ){</span></div><div><br clear="none"/></div><div><span style="font-size: 12pt;">     要干什么？（放在</span><span style="font-size: 12pt; color: rgb(255, 122, 116); font-weight: bold;">浏览器中</span><span style="font-size: 12pt;">，</span><span style="font-size: 12pt; color: rgb(255, 122, 116); font-weight: bold;">不执行</span><span style="font-size: 12pt;">，当事件发生的时候</span><span style="font-size: 12pt; color: rgb(255, 122, 116); font-weight: bold;">再执行</span><span style="font-size: 12pt;">。）</span></div><div><br clear="none"/></div><div><span style="font-size: 12pt;">}</span></div><div><br clear="none"/></div><div><span style="font-size: 12pt;">oDiv.onclick=function(){     </span></div><div><span style="font-size: 12pt;">     alert（1）</span></div><div><span style="font-size: 12pt;">}</span></div><div><br clear="none"/></div><div><span style="font-size: 12pt;">事件总结：事件是给浏览器定义一个</span><span style="font-size: 12pt; color: rgb(227, 0, 0);">预处理</span><span style="font-size: 12pt;">函数，当事件触发的时候，执行函数，这就是事件。</span></div><div><br clear="none"/></div><div><br clear="none"/></div><div><span style="font-size: 12pt;">当事件被触发的时候奥特曼会得到一个信息（事件对象），包含了跟事件相关的一些属性和方法的封装（如：事件发生的元素、键盘按键的状态、鼠标的位置、鼠标按钮的状态等），只有事件在触发的时候才会得到。</span></div><div><br clear="none"/></div><div><span style="font-size: 12pt;">oDiv.onmousedown=function(e){</span></div><div><span style="font-size: 12pt;">     alert（e）;</span></div><div><span style="font-size: 12pt;">}</span></div><div><br clear="none"/></div><div><span style="font-size: 12pt;">JS缺德定律：事件对象有兼容问题；</span></div><div><br clear="none"/></div><div><span style="font-size: 12pt;">所以我们先做好兼容再去使用事件对象：</span></div><div><br clear="none"/></div><div><span style="font-size: 12pt; color: rgb(255, 122, 116);">e=e || window.event;</span></div><div><br clear="none"/></div><div><span style="font-size: 12pt;">alert (e.buttons)观察.buttons的返回值；</span></div><div><br clear="none"/></div><div><br clear="none"/></div><div><br clear="none"/></div><div><span style="font-size: 16px;">鼠标事件及方法；</span></div><div><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 206px;"></col><col style="width: 429px;"></col></colgroup><tbody><tr><td rowspan="1" style="border: 1px solid rgb(204, 204, 204); width: 206px; padding: 8px;"><div>属性名</div></td><td rowspan="1" style="border: 1px solid rgb(204, 204, 204); width: 429px; padding: 8px;"><div>含义</div></td></tr><tr><td rowspan="1" style="border: 1px solid rgb(204, 204, 204); width: 206px; padding: 8px;"><div><span style="font-size: 16px;">e.buttons</span></div></td><td rowspan="1" style="border: 1px solid rgb(204, 204, 204); width: 429px; padding: 8px;"><div><span style="font-size: 16px;">返回鼠标点击按键（1左键，2右键，4中键滚轮）</span></div></td></tr><tr><td rowspan="1" style="border: 1px solid rgb(204, 204, 204); width: 206px; padding: 8px;"><div><span style="font-size: 12pt;">e.offsetX / offsetY</span></div></td><td rowspan="1" style="border: 1px solid rgb(204, 204, 204); width: 429px; padding: 8px;"><div><span style="font-size: 16px;">获取事件触发最近的盒子（事件源）的坐标</span></div></td></tr><tr><td rowspan="1" style="border: 1px solid rgb(204, 204, 204); width: 206px; padding: 8px;"><div>e.<span style="font-size: 16px;">clientX / clientY</span></div></td><td rowspan="1" style="border: 1px solid rgb(204, 204, 204); width: 429px; padding: 8px;"><div><span style="font-size: 16px;">获取可视区的坐标（根据浏览器的定位）</span></div></td></tr><tr><td rowspan="1" style="border: 1px solid rgb(204, 204, 204); width: 206px; padding: 8px;"><div>e.<span style="font-size: 16px;">screenX / screenY</span></div></td><td rowspan="1" style="border: 1px solid rgb(204, 204, 204); width: 429px; padding: 8px;"><div><span style="font-size: 16px;">获取整个屏幕的坐标</span></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 206px; padding: 8px;"><div><span style="font-size: 12pt;">e.pageX / e.pageY</span></div></td><td style="border: 1px solid rgb(204, 204, 204); width: 429px; padding: 8px;"><div><span style="font-size: 16px;">获取文档的坐标（包含滚动条）</span></div></td></tr></tbody></table><div><br clear="none"/></div><div><br clear="none"/></div><div><img src="00-笔记_files/Image.png" type="image/png" data-filename="Image.png" style="font-size: 12pt;"/></div></div><div><br clear="none"/></div><div><br clear="none"/></div><div><br/></div><div><br clear="none"/></div><div><span style="font-size: 12pt;">键盘事件：keydown、keyup、keypress</span></div><div><br clear="none"/></div><div><span style="font-size: 12pt;">document.onkeydown = function(e){</span></div><div><span style="font-size: 12pt;">     </span><span style="font-size: 12pt;">console.log(e.keyCode)</span><span style="font-size: 12pt;">   </span></div><div><span style="font-size: 12pt;">}</span></div><div><br clear="none"/></div><div><span style="font-size: 16px;">键盘上每一个键都有一个唯一的编码，用来识别当前用户正在操作的是键盘上哪一个键</span></div><div><br clear="none"/></div><div><span style="font-size: 16px;">有兼容问题</span></div><div><span style="font-size: 16px;">e.keyCode || e.which</span></div><div><br clear="none"/></div><div><br clear="none" style="font-size: 12pt;"/></div><div><span style="font-size: 12pt;">特殊键码：是否按下alt  ctrl  和 shift</span></div><div><br clear="none"/></div><div><span style="font-size: 12pt;">e.altKey</span></div><div><br clear="none"/></div><div><span style="font-size: 12pt;">e.ctrlKey</span></div><div><br clear="none"/></div><div><span style="font-size: 12pt;">e.shiftKey</span></div><div><br clear="none"/></div><div><span style="font-size: 12pt; color: rgb(255, 122, 116);">返回值是布尔值；</span></div><div><br clear="none"/></div><div><span style="font-size: 16px;">可以用来判断组合键</span></div><div><br clear="none"/></div><div><span style="font-size: 12pt;">if（e.keyCode==13&amp;&amp;e.altKey）{</span></div><div><span style="font-size: 12pt;">     alert('同时按下了enter和alt')；</span></div><div><span style="font-size: 12pt;">}</span></div><div><br clear="none"/></div><div><br clear="none"/></div><div><br clear="none"/></div><div><span style="font-size: 16pt;"><span style="font-size: 16pt; font-weight: bold;">练习</span></span></div><div><br clear="none"/></div><div><span style="font-size: 12pt;">一串内容跟随鼠标</span></div><div><span style="font-size: 12pt;">小键盘控制元素上下左右移动</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><br clear="none"/></div><div><hr/></div><div><br clear="none"/></div><div><br clear="none"/></div><div><br clear="none"/></div><div><span style="font-size: 12pt;">默认行为（浏览器）</span></div><div><br clear="none"/></div><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 12pt; color: rgb(34, 34, 34); font-variant-caps: normal; font-variant-ligatures: normal;">有一些html元素默认的行为，比如说a标签，点击后有跳转动作；form表单中的submit类型的input有一个默认提交跳转事件；reset类型的input有重置表单行为。</span></span></div><div><br clear="none"/></div><div><span style="font-size: 12pt; color: rgb(34, 34, 34);">但是，有些时候我们是不需要默认事件的，所以就需要阻止默认事件</span></div><div><br clear="none"/></div><div><span style="font-size: 12pt; color: rgb(34, 34, 34);">return false；</span></div><div><br clear="none"/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 16px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: #333333; font-family: 'Yu Gothic UI'; font-variant-caps: normal; font-variant-ligatures: normal;">if(e.preventDefault) {</span></div><div><br clear="none" style="font-size: 12pt; color: #222222; font-family: Monaco;"/></div><div><span style="font-size: 16px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: #333333; font-family: 'Yu Gothic UI'; font-variant-caps: normal; font-variant-ligatures: normal;">   e.preventDefault();</span></div><div><br clear="none" style="color: #333333; font-variant: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 12pt; font-family: Monaco;"/></div><div><span style="font-size: 16px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: #333333; font-family: 'Yu Gothic UI'; font-variant-caps: normal; font-variant-ligatures: normal;">}else {</span></div><div><br clear="none" style="font-size: 12pt; color: #222222; font-family: Monaco;"/></div><div><span style="font-size: 16px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: #333333; font-family: 'Yu Gothic UI'; font-variant-caps: normal; font-variant-ligatures: normal;">    window.event.returnValue = false;    </span></div><div>    <font style="font-size: 12pt;">//return false;</font></div><div><br clear="none" style="color: #333333; font-variant: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 12pt; font-family: Monaco;"/></div><div><span style="font-size: 16px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: #333333; font-family: 'Yu Gothic UI'; font-variant-caps: normal; font-variant-ligatures: normal;">}</span></div></div><div><br clear="none"/></div><div><br clear="none"/></div><div><span style="font-size: 12pt;">1、右键菜单（上下文菜单）  oncontextmenu</span></div><div><br clear="none"/></div><div><br/></div><div><br clear="none"/></div><div><span style="font-size: 12pt;">2、表单提交事件 onsubmit</span></div><div><br clear="none"/></div><div><br clear="none"/></div><div><br clear="none"/></div><div><span style="font-size: 16pt;"><span style="font-size: 16pt; font-weight: bold;">练习</span></span></div><div><br clear="none"/></div><div><span style="font-size: 12pt;">1、输入框默认提示，模拟 placeholder</span></div><div><span style="font-size: 12pt;">2、表格即时编辑</span></div><div><span style="font-size: 12pt;">3、输入框模拟select下拉菜单</span></div><div><span style="font-size: 12pt;">4、聊天对话框</span></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><span style="font-size: 16pt;"><span style="font-size: 16pt; font-weight: bold;">事件流</span></span></div><div><br clear="none" style="font-size: 12pt;"/></div><div><span style="font-size: 12pt;">子元素的事件被触发时，父级也会被触发（冒泡）</span></div><div><br style="font-size: 12pt;"/></div><div><span style="font-size: 14pt;">一个完整事件流包含  捕获阶段 ---&gt; 目标阶段  ---&gt;冒泡阶段</span></div><div><br style="font-size: 12pt;"/></div><div><br/></div><div><br clear="none"/></div><div><br clear="none"/></div><div><br clear="none"/></div><div><br clear="none"/></div><div><br clear="none"/></div><div><br clear="none"/></div></span>
</div></body></html> 